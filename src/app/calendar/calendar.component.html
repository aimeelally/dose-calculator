<div class="container">
  <ng-container *ngFor="let round of dosages">
    <div>
      <h2>{{ round.title }}</h2>

      <ng-container *ngFor="let week of round.dosagesByWeek; index as i">
        <table
          mat-table
          [dataSource]="week.dosagesByDay"
          class="mat-elevation-z8"
        >
          <!-- WEEK HEADER -->
          <ng-container matColumnDef="week">
            <th mat-header-cell *matHeaderCellDef colspan="8">
              {{ week.title }}
            </th>
          </ng-container>

          <!-- COLUMNS -->
          <ng-container matColumnDef="col-dose">
            <td mat-cell *matCellDef="let dosage">{{ dosage.dose }}</td>
          </ng-container>
          <!-- <ng-container
            *ngFor="let dosage of dosages; index as i"
            matColumnDef="col-day{{ i }}"
            ><td mat-cell *matCellDef="let dosage" [innerHTML]="dosage.day1"></td
          ></ng-container> -->

          <ng-container matColumnDef="col-day1">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day1"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day2">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day2"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day3">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day3"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day4">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day4"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day5">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day5"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day6">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day6"
            ></td>
          </ng-container>
          <ng-container matColumnDef="col-day7">
            <td
              mat-cell
              *matCellDef="let dosage"
              [innerHTML]="dosage.day7"
            ></td>
          </ng-container>

          <!-- HEADERS -->
          <ng-container
            *ngFor="let header of getHeadersAsObj(week)"
            matColumnDef="{{ header.id }}"
          >
            <th mat-header-cell *matHeaderCellDef>{{ header.title }}</th>
          </ng-container>

          <!-- table header and col definitions -->
          <tr
            mat-header-row
            *matHeaderRowDef="['week']"
            class="example-second-header-row"
          ></tr>
          <tr
            mat-header-row
            *matHeaderRowDef="getHeadersAsStringArr(week)"
            class="example-second-header-row"
          ></tr>

          <tr
            mat-row
            *matRowDef="let row; columns: getDisplayedColumns(week)"
          ></tr>
        </table>
      </ng-container>
    </div>
  </ng-container>
</div>
